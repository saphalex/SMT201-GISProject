<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-04-06">

<title>Pavement vs Peat â€“ GIS Group 6: Pavement vs Peat</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-530bf8e59df25186f8bffdc63bad3503.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">GIS Group 6: Pavement vs Peat</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Abstract</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./scope.html"> 
<span class="menu-text">Project Scope</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./data.html" aria-current="page"> 
<span class="menu-text">Data Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./methodology.html"> 
<span class="menu-text">Methodology</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./qgis2web/index.html"> 
<span class="menu-text">Web Maps</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./lessons.html"> 
<span class="menu-text">Recommendations &amp; Lessons</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./stepbystep.html"> 
<span class="menu-text">Step-by-Step</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./poster.html"> 
<span class="menu-text">Poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">Team</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-analysis-discussion" id="toc-data-analysis-discussion" class="nav-link active" data-scroll-target="#data-analysis-discussion">5.0 Data Analysis &amp; Discussion</a>
  <ul class="collapse">
  <li><a href="#change-in-land-cover-of-selected-land-classes" id="toc-change-in-land-cover-of-selected-land-classes" class="nav-link" data-scroll-target="#change-in-land-cover-of-selected-land-classes">5.1 Change in Land Cover of Selected Land Classes</a>
  <ul class="collapse">
  <li><a href="#vegetation" id="toc-vegetation" class="nav-link" data-scroll-target="#vegetation">5.1.1 Vegetation</a></li>
  <li><a href="#water-bodies" id="toc-water-bodies" class="nav-link" data-scroll-target="#water-bodies">5.1.2 Water Bodies</a></li>
  <li><a href="#impervious-surfaces" id="toc-impervious-surfaces" class="nav-link" data-scroll-target="#impervious-surfaces">5.1.3 Impervious Surfaces</a></li>
  <li><a href="#low-rise-buildings" id="toc-low-rise-buildings" class="nav-link" data-scroll-target="#low-rise-buildings">5.1.4 Low-Rise Buildings</a></li>
  <li><a href="#barren-land" id="toc-barren-land" class="nav-link" data-scroll-target="#barren-land">5.1.5 Barren Land</a></li>
  </ul></li>
  <li><a href="#overall-trend-in-land-cover-change" id="toc-overall-trend-in-land-cover-change" class="nav-link" data-scroll-target="#overall-trend-in-land-cover-change">5.2 Overall Trend in Land Cover Change</a></li>
  <li><a href="#an-example-of-our-observations-bukit-tunku" id="toc-an-example-of-our-observations-bukit-tunku" class="nav-link" data-scroll-target="#an-example-of-our-observations-bukit-tunku">5.3 An Example of our Observations: Bukit Tunku</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pavement vs Peat</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Anne Saphrin Alex Sathyan, Harshitha Balaji, Lau Liang Jun </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 6, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">April 19, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="data-analysis-discussion" class="level1">
<h1>5.0 Data Analysis &amp; Discussion</h1>
<section id="change-in-land-cover-of-selected-land-classes" class="level2">
<h2 class="anchored" data-anchor-id="change-in-land-cover-of-selected-land-classes">5.1 Change in Land Cover of Selected Land Classes</h2>
<p>Given our classification and accuracy values, we have selected the following land classes to focus our analysis on as we believe that these show the most relevance to our problem statement and goal: Vegetation (Natural &amp; Managed), Impervious Surfaces, Water Bodies, Barren Land, Low-Rise Buildings.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.28.42 PM.png" class="img-fluid figure-img" width="1000"></p>
<figcaption><em>Bar chart showing the selected land classes and their composition in the overall KL region over the 5 years</em></figcaption>
</figure>
</div>
<section id="vegetation" class="level3">
<h3 class="anchored" data-anchor-id="vegetation">5.1.1 Vegetation</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.31.01 PM.png" class="img-fluid figure-img" width="600"></p>
<figcaption><em>Bar chart excerpt showing the composition of the 2 types of vegetations over the 5 years</em></figcaption>
</figure>
</div>
<p>For natural vegetation, the figures tend to fluctuate between 8.62% - 9.92% of the total land cover from 2020 to 2023. However, there is a stark decrease (3.52% ) from 2023 (8.62%) to 2024 (5.1%), signalling that there has been some type of an intervening event in 2023 that has affected the percentage of natural vegetation present in the state in 2024.&nbsp;</p>
<p>On the other hand, the chart shows a relatively small percentage of land cover occupied by managed vegetation from 2020 to 2022, with 2021 having the highest value of yet only 6.09%. However, there are notable and consistent sharp increases from 2022 to 2024, with a jump from 4.08% in 2022 to 11.44% in 2023, and a jump from 11.44% in 2023 to 15.18% in 2024. This could reflect greater efforts taken to improve managed greenery and grounds.</p>
</section>
<section id="water-bodies" class="level3">
<h3 class="anchored" data-anchor-id="water-bodies">5.1.2 Water Bodies</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.32.27 PM.png" class="img-fluid figure-img" width="400"></p>
<figcaption><em>Bar chart excerpt showing the composition of water bodies over the 5 years</em></figcaption>
</figure>
</div>
<p>The composition of water bodies has consistently remained relatively low across all 5 years, with the highest figure being 3.88% in 2020. After a 2.59% drop to 1.29% in 2021, it increased insignificantly to 1.31% in 2022 before decreasing to 0.88% in 2023. Notably, there is a significant 2.46% increase from 0.88% in 2023 to 3.34 in 2024, once again signalling to us that there may have been some type of an intervening event in 2023 that could have resulted in the increase in 2024.&nbsp;</p>
</section>
<section id="impervious-surfaces" class="level3">
<h3 class="anchored" data-anchor-id="impervious-surfaces">5.1.3 Impervious Surfaces</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.34.43 PM.png" class="img-fluid figure-img" width="400"></p>
<figcaption><em>Bar chart excerpt showing the composition of impervious surfaces over the 5 years</em></figcaption>
</figure>
</div>
<p>Over the 5 year span, there has been a constant decrease in the percentage composition of impervious surfaces (roads) in the state, with 2 significant drops: a 4.08% decrease from 13.96% in 2020 to 9.88% in 2021, as well as a 3.35% decrease from 8.56% in 2023 to 5.21% in 2024. These decreases may be attributed to significant intervening events in 2020 and 2023 respectively. Otherwise, even though it decreased slightly every year (9.88% in 2021 to 9.49% in 2022, 9.49% in 2022 to 8.56% in 2023), the percentage composition did not fluctuate significantly from 2021 to 2023.</p>
</section>
<section id="low-rise-buildings" class="level3">
<h3 class="anchored" data-anchor-id="low-rise-buildings">5.1.4 Low-Rise Buildings</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.36.31 PM.png" class="img-fluid figure-img" width="400"></p>
<figcaption><em>Bar chart excerpt showing the composition of low-rise buildings over the 5 years</em></figcaption>
</figure>
</div>
<p>The percentage composition of low-rise buildings in the state has consistently been quite high, consistent with the fact that KL is a highly urbanised city. There seems to be consistent increases from 2020 (17.51%) to 2021 (19.50%) as well as from 2021 (19.50%) to 2022 (24.32%), which could be a sign of greater urbanisation. From 2022 to 2023 however, there is a 3.75% decrease from 24.32% (2022) to 20.57% (2023) and no further major increase or decrease after 2023. This could signal efforts to scale back on urban development from 2022 onwards, but further research and information is required to conclusively state anything regarding these figures.&nbsp;&nbsp;</p>
</section>
<section id="barren-land" class="level3">
<h3 class="anchored" data-anchor-id="barren-land">5.1.5 Barren Land</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.38.43 PM.png" class="img-fluid figure-img" width="400"></p>
<figcaption><em>Bar chart excerpt showing the composition of barren land over the 5 years</em></figcaption>
</figure>
</div>
<p>The percentage composition of barren land present in the state has undergone fluctuations from 2020 to 2024. Barring a somewhat insignificant 0.61% increase from 11.67% in 2020 to 12.28% in 2021, there were 2 more notable decreases: a 3.66% decrease from 12.28% in 2021 to 8.62% in 2022, as well as a 1.42% decrease from 8.62% in 2022 to 7.20% in 2023. These decreases could be because of the usage of barren land for urbanisation and development purposes. Most interestingly, the composition of barren land more than doubles from 2023 to 2024 â€“ a whopping 7.21% increase from 7.20% in 2023 to 14.41% in 2024. This could be attributed to some type of intervening event that has led to some massive clearance of land.&nbsp;&nbsp;</p>
</section>
</section>
<section id="overall-trend-in-land-cover-change" class="level2">
<h2 class="anchored" data-anchor-id="overall-trend-in-land-cover-change">5.2 Overall Trend in Land Cover Change</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.40.08 PM.png" class="img-fluid figure-img" width="1008"></p>
<figcaption><em>Line chart showing the overall trends of the selected land classes over the 5 years</em></figcaption>
</figure>
</div>
<p>From the above chart, we are able to observe the following:&nbsp;</p>
<ol type="1">
<li><p><strong>Low-rise buildings occupy the greatest percentage of land cover, with a consistent upwards trend</strong>. This shows that there has been a steady increase in urbanisation efforts, with more and more development across the years.&nbsp;</p></li>
<li><p><strong>Managed vegetation exhibits a consistent increasing trend, currently even exceeding the proportion of barren land available</strong>. This shows that residential and commercial areas, where managed vegetation is noted to be more commonly present, have remained relatively unscathed by the effects of landslides.&nbsp;</p></li>
<li><p><strong>Barren land has not undergone any major increasing or decreasing trend, but does exhibit sharp increases/decreases between years</strong>. This could be due to the sudden nature of landslides and other intervening events that destroy anything present on the land, creating more barren land and this would explain the sharp increase(s). When this happens, rebuilding and rehabilitation efforts are often taken up immediately, once again reducing the barren land available, explaining the sharp decrease(s).&nbsp;</p></li>
<li><p><strong>Both natural vegetation and impervious surfaces have shown a consistent decreasing trend</strong>. Both these land classes could have been affected by&nbsp;</p>
<ul>
<li><p>Urbanisation effects which call for deforestation (thereby reducing natural vegetation) and redevelopment (thereby requiring the demolition of roads [impervious surfaces]) as well as,&nbsp;</p></li>
<li><p>Landslides, which have the ability to destroy everything on the ground as well as the ground itself, which means that both forested areas and naturally-vegetated areas, as well as roads and other infrastructure.&nbsp;</p></li>
</ul></li>
<li><p><strong>Water bodies occupy the lowest percentage of land cover, with no significant observable trend</strong>. As a landlocked city-state, it is not possible to have water bodies such as the sea. However, flash floods, excessive rainfall and other water-related intervening events could increase/decrease the volume of water present in reservoirs, rivers and lakes, which would explain the slight fluctuations observed in the line chart.</p></li>
</ol>
<p>Ultimately, these patterns reflect how urban sprawl into hilly, vegetated regions may have intensified environmental vulnerability while leaving core urban centres less directly affected.</p>
</section>
<section id="an-example-of-our-observations-bukit-tunku" class="level2">
<h2 class="anchored" data-anchor-id="an-example-of-our-observations-bukit-tunku">5.3 An Example of our Observations: Bukit Tunku</h2>
<p>Our above data analysis provides us with a broad snapshot of the type of land cover changes that have happened over the span of 5 years. Given the size of the area we have chosen to analyse, we wish to focus this section of our analysis on a major landslide that could grant us greater insight into the overall trends we have observed. We also lack sufficient information and time to replicate this analysis for all landslides that happened. Therefore, we focused on specifically the 2023 Bukit Tunku landslide given its scale and the damage it created to illustrate the devastating effects landslides can have on land cover.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.43.47 PM.png" class="img-fluid figure-img" width="1000"></p>
<figcaption><em>A side-by-side comparison of the land cover at Bukit Tunku before and after the 2023 landslide</em></figcaption>
</figure>
</div>
<p>From the indicated parts on the maps, we are able to observe that there has been a loss of low-rise building(s) and an increase in barren land. This is consistent with what was observed in the aftermath of the landslide, which occurred near the Malaysian Anti-Corruption Academy at Persiaran Tuanku Syed Sirajuddin in Bukit Tunku. Interestingly, we are also able to observe from the above line graph that barren land has increased sharply from 2023 to 2024 and that natural vegetation has decreased in that same time frame.&nbsp;</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2025-04-16 at 1.44.51 PM.png" class="img-fluid figure-img" width="1000"></p>
<figcaption><em>A side-by-side comparison of MACA at Bukit Tunku before and after the 2023 landslide</em></figcaption>
</figure>
</div>
<p>While it would be myopic to conclude that this one landslide alone would have caused such drastic changes in land cover, especially for the natural vegetation and barren land classes, such events are consistent with the trends observed as a whole.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>